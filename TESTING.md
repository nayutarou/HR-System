# テスト (Testing)

このドキュメントでは、この人事管理システムのテストに関する情報を提供します。

## 概要

このプロジェクトでは、アプリケーションの品質と安定性を確保するために、単体テストと結合テストを導入しています。テストは主に、Webリクエストを処理するコントローラー層に焦点を当てています。

## 技術スタック

テストには以下のフレームワークとライブラリを使用しています。

-   **Spring Boot Test:** Spring Bootアプリケーションのテストを容易にするための包括的なサポートを提供します。
-   **JUnit 5:** Javaアプリケーションの標準的なテストフレームワークです。
-   **Mockito:** Service層などの依存関係をモック化（偽のオブジェクトに置き換え）するために使用します。これにより、テスト対象のコンポーネントを分離してテストできます。
-   **MockMvc:** Spring MVCコントローラーのテストを、実際にサーバーを起動することなく実行するためのフレームワークです。

これらの依存関係は `pom.xml` ファイルで管理されています。

## テストの実行方法

プロジェクトのルートディレクトリで以下のコマンドを実行することで、全てのテストを実行できます。

```bash
./mvnw test
```

このコマンドは、Mavenを使って `src/test/java` ディレクトリ配下にある全てのテストクラスを検出し、実行します。

## テストの種類

### 1. 結合テスト (`HrSystemApplicationTests.java`)

-   **目的:** Spring Bootアプリケーションのコンテキストが正常に読み込まれ、アプリケーション全体が問題なく起動できることを確認します。
-   **実装:** `@SpringBootTest` アノテーションをクラスに付与することで、テスト実行時に完全なアプリケーションコンテキストを読み込みます。

### 2. コントローラー単体テスト (`WebControllerTest.java`)

-   **目的:** `WebController` の各メソッドが、期待通りに動作することを確認します。HTTPリクエストの受信、適切なServiceメソッドの呼び出し、正しいビューへの遷移、Modelへのデータ設定などを検証します。
-   **実装:**
    -   `@WebMvcTest(WebController.class)` アノテーションを使い、`WebController` のみに対象を絞ったテストコンテキストを構築します。
    -   `@MockBean` を使って `DepartmentService` や `EmployeesService` のような外部依存をモック化し、データベースにアクセスすることなくコントローラーのロジックのみをテストします。
    -   `MockMvc` を使って、`GET` や `POST` といったHTTPリクエストをシミュレートし、レスポンスのステータスコード、リダイレクト先、ビュー名、Modelの属性などを検証します。
    -   バリデーションエラーのケースや、存在しないIDへのアクセスといったエッジケースもテストされています。

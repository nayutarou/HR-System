<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layout/base :: head(${department.id} ? '部署情報更新' : '部署登録', @{/css/form-style.css})}">
</head>

<body th:replace="~{layout/base :: body(~{::content})}">

<main th:fragment="content">

    <h1 th:text="${department.id} ? '部署情報更新' : '新しい部署を登録'">新しい部署を登録</h1>

    <div th:if="${param.error}" class="alert alert-danger">
        処理に失敗しました。必須項目を確認するか、対象が存在するか確認してください。
    </div>

    <form class="data-form"
          th:action="${department.id} ? @{/web/departments/update/{id}(id=${department.id})} : @{/web/departments}"
          th:object="${department}"
          method="post">

        <div th:if="${#fields.hasErrors('global')}" class="alert alert-danger">
            <p th:each="err : ${#fields.errors('global')}" th:text="${err}"></p>
        </div>

        <div class="form-group">
            <label for="name">部署名<span class="required">*</span>:</label>
            <input type="text" id="name" th:field="*{name}" class="form-control"/>
            <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error-message">
            </div>
        </div>

        <div class="form-group">
            <label for="location">所在地<span class="required">*</span>:</label>
            <input type="text" id="location" th:field="*{location}" class="form-control"/>
            <div th:if="${#fields.hasErrors('location')}" th:errors="*{location}" class="error-message">
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary" th:text="${department.id} ? '更新する' : '登録する'">登録する</button>
            <a th:href="@{/web/departments}" class="btn btn-link">一覧に戻る</a>
        </div>
    </form>

</main>
</body>
</html>
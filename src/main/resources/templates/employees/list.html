<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layout/base :: head('従業員一覧', @{/css/list-style.css})}">
</head>

<body th:replace="~{layout/base :: body(~{::content})}">

<div th:fragment="content">

    <h1>従業員一覧</h1>

    <div th:if="${param.delete_error}" class="alert alert-danger">
        削除処理に失敗しました。対象のIDを確認してください。
    </div>

    <div class="page-actions">
        <a th:href="@{/web/}" class="btn btn-link">🏠 ホームに戻る</a>
        <a th:href="@{/web/employees/new}" class="btn btn-primary">＋ 新しい従業員を登録</a>
    </div>

    <table class="data-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>氏名</th>
            <th>メールアドレス</th>
            <th>所属部署</th>
            <th>役職</th>
            <th>入社日</th>
            <th class="actions-header">操作</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="emp : ${employees}">
            <td th:text="${emp.id}">1</td>
            <td th:text="${emp.lastName} + ' ' + ${emp.firstName}">山田 太郎</td>
            <td th:text="${emp.email}">yamada@example.com</td>
            <td th:text="${emp.departmentName}">営業部</td>
            <td th:text="${emp.position}">部長</td>
            <td th:text="${#temporals.format(emp.hireDate, 'yyyy-MM-dd')}">2020-04-01</td> <td class="actions-cell">
            <a th:href="@{/web/employees/edit/{id}(id=${emp.id})}" class="btn btn-secondary btn-sm">編集</a>
            <form th:action="@{/web/employees/delete/{id}(id=${emp.id})}" method="post">
                <button type="submit"
                        onclick="return confirm('本当に従業員ID ' + [[${emp.id}]] + ' を削除しますか？');"
                        class="btn btn-danger btn-sm">
                    削除
                </button>
            </form>
        </td>
        </tr>
        </tbody>
    </table>

</div>
</body>
</html>